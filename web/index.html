<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="place.css">
</head>
<body>

    <!--Helper JavaScript functions-->
    <script src='helper_functions.js'></script>

    <!--The PLACE webpage is just the top navigation bar, the PLACE div, and the footer.
        All other stuff is added dynamically.-->
    <div class="navbar">
        <a href="index.html", class="active">WebApp</a>
        <a href="https://anaconda.org/freemapa/place">Install</a>
        <a href="documentation/index.html">Documentation</a>
        <a href="https://www.github.com/palab/place">Source</a>
        <a href="https://pal.blogs.auckland.ac.nz">PAL</a>
        <div class="dropdown">
            <button class="dropbtn">Add module<i class="caret-down"></i></button>
            <div class="dropdown-content">
                <button onclick="userAddModule('instrument', Elm.AlazarTech, 'alazartech')">AlazarTech</button>
                <button onclick="userAddModule('instrument', Elm.MokuLab, 'moku_lab')">MokuLab</button>
                <button onclick="userAddModule('instrument', Elm.CustomScript1, 'custom_script_1')">Custom Script #1</button>
                <button onclick="userAddModule('instrument', Elm.XPSControl, 'xps_control')">XPS Controller</button>
                <button onclick="userAddModule('instrument', Elm.NewFocus, 'new_focus')">New Focus</button>
                <button onclick="userAddModule('instrument', Elm.Polytec, 'polytec')">Polytec</button>
                <button onclick="userAddModule('instrument', Elm.QuantaRay, 'quanta_ray')">Quanta Ray</button>
                <button onclick="userAddModule('instrument', Elm.TektronixDPO3014, 'tektronix_dpo3014')">Tektronix DPO3014</button>
                <button onclick="userAddModule('instrument', Elm.TektronixMDO3014, 'tektronix_mdo3014')">Tektronix MDO3014</button>
                <button onclick="userAddModule('instrument', Elm.DS345, 'ds345_function_gen')">DS345 Function Generator</button>
                <button onclick="userAddModule('instrument', Elm.SR560PreAmp, 'sr560_preamp')">SR560 PreAmp</button>
                <button onclick="userAddModule('instrument', Elm.SR850, 'sr850_amp')">SR850 Lock-In Amp</button>
                <button onclick="userAddModule('instrument', Elm.PLACEDemo, 'counter')">PLACE Demo</button>
                <button onclick="userAddModule('instrument', Elm.ArduinoStage, 'arduino_stage')">Arduino-controlled Stage</button>
                <button onclick="userAddModule('postprocessing', Elm.IQDemodulation, 'iq_demod')">IQ Demodulation</button>
                <button onclick="userAddModule('export', Elm.H5Output, 'h5_output')">H5 Output</button>
            </div>
        </div>
    </div>
    <div id='PLACE'></div>
    <footer>
        <p>PLACE 0.7.0 | Author: Paul Freeman | 2018
        <p>Originally created by: Jami L Johnson, Henrik tom W&ouml;rden, and Kasper van Wijk</p>
    </footer>

    <!--Load all the Elm webapp scripts here.-->
    <script src='place.js'></script>
    <script src='plugins/alazartech.js'></script>
    <script src='plugins/mokulab.js'></script>
    <script src='plugins/custom_script_1.js'></script>
    <script src='plugins/xps_control.js'></script>
    <script src='plugins/new_focus.js'></script>
    <script src='plugins/polytec.js'></script>
    <script src='plugins/quanta_ray.js'></script>
    <script src='plugins/tektronix_dpo3014.js'></script>
    <script src='plugins/tektronix_mdo3014.js'></script>
    <script src='plugins/ds345_function_gen.js'></script>
    <script src='plugins/sr560_preamp.js'></script>
    <script src='plugins/sr850_amp.js'></script>
    <script src='plugins/place_demo.js'></script>
    <script src='plugins/arduino_stage.js'></script>
    <script src='plugins/iq_demodulation.js'></script>
    <script src='plugins/h5_output.js'></script>

    <!--This JavaScript dynamically loads all the plugin webapps for PLACE.-->
    <script>
        var place;
        var placenode;
        var modulelist = [];

        var node = document.createElement('div');
        node.id = "place";
        var place = Elm.Place.embed(node, {
            version: "0.7.0"
        });
        var placenode = document.getElementById('PLACE');
        placenode.appendChild(node);

        // This is where the PLACE modules are added to the webpage
        if (localStorage.getItem("alazartech") == "1") {
            addInstrument(Elm.AlazarTech, "alazartech");
        }
        if (localStorage.getItem("moku_lab") == "1") {
            addInstrument(Elm.MokuLab, "moku_lab");
        }
        if (localStorage.getItem("xps_control") == "1") {
            addInstrument(Elm.XPSControl, "xps_control");
        }
        if (localStorage.getItem("new_focus") == "1") {
            addInstrument(Elm.NewFocus, "new_focus");
        }
        if (localStorage.getItem("polytec") == "1") {
            addInstrument(Elm.Polytec, "polytec");
        }
        if (localStorage.getItem("quanta_ray") == "1") {
            addInstrument(Elm.QuantaRay, "quanta_ray");
        }
        if (localStorage.getItem("tektronix_dpo3014") == "1") {
            addInstrument(Elm.TektronixDPO3014, "tektronix_dpo3014");
        }
        if (localStorage.getItem("tektronix_mdo3014") == "1") {
            addInstrument(Elm.TektronixMDO3014, "tektronix_mdo3014");
        }
        if (localStorage.getItem("ds345_function_gen") == "1") {
            addInstrument(Elm.DS345, "ds345_function_gen");
        }
        if (localStorage.getItem("sr560_preamp") == "1") {
            addInstrument(Elm.SR560PreAmp, "sr560_preamp");
        }
        if (localStorage.getItem("sr850_amp") == "1") {
            addInstrument(Elm.SR850, "sr850_amp");
        }
        if (localStorage.getItem("custom_script_1") == "1") {
            addInstrument(Elm.CustomScript1, "custom_script_1");
        }
        if (localStorage.getItem("counter") == "1") {
            addInstrument(Elm.PLACEDemo, "counter");
        }
        if (localStorage.getItem("arduino_stage") == "1") {
            addInstrument(Elm.ArduinoStage, "arduino_stage");
        }
        if (localStorage.getItem("iq_demod") == "1") {
            addPostProcessing(Elm.IQDemodulation, "iq_demod");
        }
        if (localStorage.getItem("h5_output") == "1") {
            addExport(Elm.H5Output, "h5_output");
        }
    </script>
</body>
</html>
