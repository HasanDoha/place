<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Elm Frontend Tutorial &#8212; PLACE 0.5.1 documentation</title>
    <link rel="stylesheet" href="_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.5.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Python Backend Tutorial" href="backend_tutorial.html" />
    <link rel="prev" title="PLACE configuration" href="config.html" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <link rel="shortcut icon" type="image/png" href="_static/favicon.png" />
    <meta name="viewport" content="width=device-width,initial-scale=0.8">
    
    

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="responsive-menu"><a href="#sidebar-anchor" title="Navigation">&#9776;</a></li>
        <li><a href="index.html">PLACE 0.5.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    
        <div class="badge">
            <a href="https://github.com/PALab/place/">Fork me on GitHub</a>
            <img src="_static/right-red@2x.png">
        </div>
    
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="elm-frontend-tutorial">
<h1>Elm Frontend Tutorial<a class="headerlink" href="#elm-frontend-tutorial" title="Permalink to this headline">¶</a></h1>
<p>Due to the sheer number of options available in PLACE, operating it via
the command-line interface, while possible, is cumbersome. In order to
provide users with easy access to all PLACE options, a web interface has
been developed. The web interface runs in JavaScript, making it well
supported across operating systems. However, to ease in the development
of JavaScript, the programming language <a class="reference external" href="https://elm-lang.org">Elm</a>
is highly recommended. Elm is a functional programming language with
static type checking that can be easily compiled to JavaScript.</p>
<div class="section" id="brief-elm-introduction">
<h2>Brief Elm introduction<a class="headerlink" href="#brief-elm-introduction" title="Permalink to this headline">¶</a></h2>
<p>Elm is probably new to most users of PLACE and, being a functional
language, it will appear different from many languages you have
encountered in the past. Rest assured, though, that our goal is not to
teach you to program in Elm, but rather to give you some simple tools
for constructing basic user interfaces using Elm.</p>
<p>As the term implies, functional languages treat everything as a
function. Look at a simple statement like:</p>
<div class="highlight-elm"><div class="highlight"><pre><span></span><span class="nv">x</span> <span class="nf">=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>This does not create a variable named <code class="docutils literal"><span class="pre">x</span></code> and give it the value <code class="docutils literal"><span class="pre">1</span></code>.
Instead, this creates a function named <code class="docutils literal"><span class="pre">x</span></code> that takes no inputs and
always produces <code class="docutils literal"><span class="pre">1</span></code>. Thus we cannot change the value of <code class="docutils literal"><span class="pre">x</span></code> to
something else. It is this differentiation that usually causes the most
confustion, but you will get used to it quickly.</p>
<p>When a function take arguments, they are simply listed after the
function name. Like this:</p>
<div class="highlight-elm"><div class="highlight"><pre><span></span><span class="nv">squareThis</span> <span class="nv">number</span> <span class="nf">=</span> <span class="nv">number</span> <span class="nf">*</span> <span class="nv">number</span>
</pre></div>
</div>
<p>In this example, <code class="docutils literal"><span class="pre">squareThis</span></code> is the function name, <code class="docutils literal"><span class="pre">number</span></code> is the
argument. In Python, this would essentially be the same code as this:</p>
<div class="highlight-elm"><div class="highlight"><pre><span></span><span class="nv">def</span> <span class="nv">squareThis</span><span class="p">(</span><span class="nv">number</span><span class="p">)</span><span class="nf">:</span>
    <span class="nv">return</span> <span class="nv">number</span> <span class="nf">*</span> <span class="nv">number</span>
</pre></div>
</div>
<p>Okay, that’s a good start. The only other thing I want you to know right
now is that we often will explicitly list the types being used in a
function. So, you will often see our <code class="docutils literal"><span class="pre">squareThis</span></code> function written
like this:</p>
<div class="highlight-elm"><div class="highlight"><pre><span></span><span class="nv">squareThis</span> <span class="nf">:</span> <span class="kt">Float</span> <span class="nf">-&gt;</span> <span class="kt">Float</span>
<span class="nv">squareThis</span> <span class="nv">number</span> <span class="nf">=</span> <span class="nv">number</span> <span class="nf">*</span> <span class="nv">number</span>
</pre></div>
</div>
<p>The ‘type line’ just tells us that this function takes in one floating
point value and produces a new one. To compare, our simple <code class="docutils literal"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">1</span></code>
line would have a type line like <code class="docutils literal"><span class="pre">x</span> <span class="pre">:</span> <span class="pre">Int</span></code> to tell us that it took in
nothing and produced an integer.</p>
<p>My best advice at this point is just to move on. This won’t make
complete sense now, but you will usually have plenty of examples to use
so it doesn’t matter.</p>
</div>
<div class="section" id="making-html-with-elm">
<h2>Making HTML with Elm<a class="headerlink" href="#making-html-with-elm" title="Permalink to this headline">¶</a></h2>
<p>The main reason PLACE uses Elm is to produce solid JavaScript, which
will in turn produce HTML for the web interface. We will refer to the
HTML as the <em>view</em>, and it is what the user will see in their web
browser. Most of our Elm code will be used to build this.</p>
<p>In Elm, an HTML block has a special type, called <code class="docutils literal"><span class="pre">Html</span> <span class="pre">Msg</span></code>. As you
can see, this type has two words instead of just one. When you have a
type with multiple words, it is kind of like having all these types
stuck together. What this means to us is that all the HTML generated by
Elm will produce some HTML for the user (the <em>HTML</em>) to see and some
messages (the <em>Msg</em>) used to manipulate what is displayed on the web
page. For instance, when they see an HTML button, they can click it and
generate a <em>message</em>.</p>
<p>The <em>messages</em> generated by the user will update a <em>model</em> that sits
inside the code. In PLACE, this model is typically the values your
module is looking for in the JSON config data. But if you haven’t read
about that yet, don’t worry.</p>
<p>All the above concepts come together into an <code class="docutils literal"><span class="pre">Html.program</span></code>, which is
just a way to wrap up all the things Elm needs into a nice little
package.</p>
<p>If you feel like you need to learn more about Elm, you can go through
<a class="reference external" href="https://guide.elm-lang.org/">their tutorial</a>. Otherwise, I’m going
to start talking about making a web interface for a PLACE module.</p>
</div>
<div class="section" id="template-module">
<h2>Template module<a class="headerlink" href="#template-module" title="Permalink to this headline">¶</a></h2>
<p>A lot of the Elm code will start the same way, so we have included a
template to use when starting a new module. You can find it
<a class="reference external" href="https://github.com/PALab/place/blob/master/elm/plugins/PLACETemplate.elm">here</a>.</p>
<p>Let’s quickly run through this file.</p>
<p>The first line defines the module. Specifying <em>port</em> at the beginning
allows our interface to communicate with PLACE.</p>
<div class="highlight-elm"><div class="highlight"><pre><span></span><span class="kr">port</span> <span class="kr">module</span> <span class="kt">PLACETemplate</span> <span class="nv">exposing</span> <span class="p">(</span><span class="nv">main</span><span class="p">)</span>
</pre></div>
</div>
<p>This is followed by standard imports, which use a similar syntax to
Python.</p>
<div class="highlight-elm"><div class="highlight"><pre><span></span><span class="kn">import </span><span class="nc">Html</span> <span class="nv">exposing</span> <span class="p">(</span><span class="kt">Html</span><span class="p">)</span>
<span class="kn">import </span><span class="nc">Html.Events</span>
<span class="kn">import </span><span class="nc">Html.Attributes</span>
<span class="kn">import </span><span class="nc">Json.Encode</span>
<span class="kn">import </span><span class="nc">ModuleHelpers</span>
</pre></div>
</div>
<p>The last import, <code class="docutils literal"><span class="pre">ModuleHelpers</span></code>, is a PLACE library of helpful
functions. These are used to simplify the process of writing new modules
for PLACE.</p>
<p>At this point, we start getting into the actual code. Generally, it
makes sense to start with the <em>model</em> first. The model is the data
structure that contains variable values needed to run your device on
PLACE. The template includes the values needed by all PLACE instruments,
but you can (and should) add values to this list as needed by your
instrument.</p>
<div class="highlight-elm"><div class="highlight"><pre><span></span><span class="kr">type</span> <span class="kr">alias</span> <span class="kt">Model</span> <span class="nf">=</span>
    <span class="p">{</span> <span class="nv">moduleName</span> <span class="nf">:</span> <span class="kt">String</span>
    <span class="p">,</span> <span class="nv">className</span> <span class="nf">:</span> <span class="kt">String</span>
    <span class="p">,</span> <span class="nv">active</span> <span class="nf">:</span> <span class="kt">Bool</span>
    <span class="p">,</span> <span class="nv">priority</span> <span class="nf">:</span> <span class="kt">Int</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>Now that we have a model, we need to have a way to work with the model.
Elm uses messages to do this. Each message defines an action you would
like to perform with the data model. The default messages are provided
in the template, but you will need to add additional messages to modify
the values added to the data model in the previous step.</p>
<div class="highlight-elm"><div class="highlight"><pre><span></span><span class="kr">type</span> <span class="kt">Msg</span>
    <span class="nf">=</span> <span class="kt">ToggleActive</span>
    <span class="nf">|</span> <span class="kt">ChangePriority</span> <span class="kt">String</span>
    <span class="nf">|</span> <span class="kt">SendJson</span>
</pre></div>
</div>
<p>Each message is essentially a function and can take additional
arguments. <code class="docutils literal"><span class="pre">ToggleActive</span></code> doesn’t take any arguments because it just
flips a boolean value back and forth. <code class="docutils literal"><span class="pre">ChangePriority</span></code> takes a
<code class="docutils literal"><span class="pre">String</span></code> as an argument because the value will be typed by the user
into the web interface.</p>
<p>Okay, after the data model and functions to modify the model, we wil
start seeing how all of this fits together. The next line is a simple
one.</p>
<div class="highlight-elm"><div class="highlight"><pre><span></span><span class="kr">port</span> <span class="nv">jsonData</span> <span class="nf">:</span> <span class="kt">Json</span><span class="nf">.</span><span class="kt">Encode</span><span class="nf">.</span><span class="kt">Value</span> <span class="nf">-&gt;</span> <span class="kt">Cmd</span> <span class="nv">msg</span>
</pre></div>
</div>
<p>This line defines a function that sends data over a port. All PLACE
interfaces need to be able to send their data (in JSON format) to PLACE
so that PLACE can provide it to the instrument during the experiment.
This is where that happens and it will always look just like this - no
need to change it.</p>
<p>From this point, it will start getting a bit more complicated, but don’t
worry too much if it doesn’t all make sense at first.</p>
<p>The <em>main</em> function is the heart of the Elm interface. This is what
creates all the JavaScript code to run the interface. Fortunately, the
<code class="docutils literal"><span class="pre">Html</span></code> module we imported at the beginning does all this for us. We
just need to specify four different arguments. Here is the code:</p>
<div class="highlight-elm"><div class="highlight"><pre><span></span><span class="kr">main </span><span class="nf">:</span> <span class="kt">Program</span> <span class="kt">Never</span> <span class="kt">Model</span> <span class="kt">Msg</span>
<span class="kr">main </span><span class="nf">=</span>
    <span class="kt">Html</span><span class="nf">.</span><span class="nv">program</span>
        <span class="p">{</span> <span class="nv">init</span> <span class="nf">=</span> <span class="p">(</span> <span class="nv">defaultModel</span><span class="p">,</span> <span class="kt">Cmd</span><span class="nf">.</span><span class="nv">none</span> <span class="p">)</span>
        <span class="p">,</span> <span class="nv">view</span> <span class="nf">=</span> <span class="nf">\</span><span class="nv">model</span> <span class="nf">-&gt;</span> <span class="kt">Html</span><span class="nf">.</span><span class="nv">div</span> <span class="p">[]</span> <span class="p">(</span><span class="nv">viewModel</span> <span class="nv">model</span><span class="p">)</span>
        <span class="p">,</span> <span class="nv">update</span> <span class="nf">=</span> <span class="nv">updateModel</span>
        <span class="p">,</span> <span class="nv">subscriptions</span> <span class="nf">=</span> <span class="nf">\</span><span class="nv">_</span> <span class="nf">-&gt;</span> <span class="kt">Sub</span><span class="nf">.</span><span class="nv">none</span>
        <span class="p">}</span>
</pre></div>
</div>
<p>So, the four things needed by the <code class="docutils literal"><span class="pre">Html.program</span></code> function are: <em>init</em>,
<em>view</em>, <em>update</em>, and <em>subscriptions</em>.</p>
<p>The first argument, <em>init</em>, just tells the program the initial value of
all the variables in the data model, plus the first command to run
(usually just <code class="docutils literal"><span class="pre">Cmd.none</span></code>). For now, we just tell <em>init</em> that the
initial values will be provided by a function named <em>defaultModel</em> that
we will write later.</p>
<p>The second argument is <em>view</em>. This needs to be set to a function that
tells Elm how to display the current data model to the user. This is
probably where most of our work needs to be done, because we will need
to determine how to generate all the HTML used to display the current
values of all the configuration settings to the user, but we also need
the view to give them options for changing the current values to other
values. If you’ve looked at any of the other modules in the PLACE web
interface, you will see that this is usually done by displaying a number
of checkboxes, dropdown menus, and text boxes. The current setting will
display in each box and the user will be able to change them as desired.</p>
<p>After the view is the <em>update</em> argument. This is where the changes made
on the web interface are processed to update the data model.
Essentailly, all the interactive components on the web interface will
produce a message when the user changes a value. This message is then
sent to the update function and changes something in the data model.
Once the update is done, the <em>view</em> will but changed to reflect the
update. This probably sounds pretty complicated, but we don’t really
need to think about how this all happens. We just need to know that it
<em>does</em> happen.</p>
<p>The final value is the <em>subscription</em>, which is not currently used by
PLACE. Just leave it the way it is. We will not cover it in this guide.
In fact, nothing in this entire function needs to be changed. The parts
you will change have been delegated to other functions.</p>
<p>Now let’s look at the definitions for <em>defaultModel</em>, <em>viewModel</em>, and
<em>updateModel</em>, which are the implementations of <em>init</em>, <em>view</em>, and
<em>update</em>.</p>
<p>Here is the <em>defaultModel</em>:</p>
<div class="highlight-elm"><div class="highlight"><pre><span></span><span class="nv">defaultModel</span> <span class="nf">:</span> <span class="kt">Model</span>
<span class="nv">defaultModel</span> <span class="nf">=</span>
    <span class="p">{</span> <span class="nv">moduleName</span> <span class="nf">=</span> <span class="s">&quot;place_template&quot;</span>
    <span class="p">,</span> <span class="nv">className</span> <span class="nf">=</span> <span class="s">&quot;None&quot;</span>
    <span class="p">,</span> <span class="nv">active</span> <span class="nf">=</span> <span class="kt">False</span>
    <span class="p">,</span> <span class="nv">priority</span> <span class="nf">=</span> <span class="mi">10</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>This should look familiar. It is basically the <em>Model</em> from the top of
the code, but with default values filled in. Here you will want to set
the <code class="docutils literal"><span class="pre">moduleName</span></code> to match the name of the Python module that
accompanies your web interface. You will also want to select a default
priority. Currently, instruments usually have a priority in the 0-100
range, and post-processing modules hover around 1000 (so they can
<em>post</em>-process) - but PLACE does not enforce this value in any way.</p>
<p>Now let’s look at the <em>viewModel</em>:</p>
<div class="highlight-elm"><div class="highlight"><pre><span></span><span class="nv">viewModel</span> <span class="nf">:</span> <span class="kt">Model</span> <span class="nf">-&gt;</span> <span class="kt">List</span> <span class="p">(</span><span class="kt">Html</span> <span class="kt">Msg</span><span class="p">)</span>
<span class="nv">viewModel</span> <span class="nv">model</span> <span class="nf">=</span>
    <span class="kt">ModuleHelpers</span><span class="nf">.</span><span class="nv">title</span> <span class="s">&quot;PLACETemplate&quot;</span> <span class="nv">model</span><span class="nf">.</span><span class="nv">active</span> <span class="kt">ToggleActive</span>
        <span class="nf">++</span> <span class="kr">if</span> <span class="nv">model</span><span class="nf">.</span><span class="nv">active</span> <span class="kr">then</span>
            <span class="p">[</span> <span class="kt">ModuleHelpers</span><span class="nf">.</span><span class="nv">integerField</span> <span class="s">&quot;Priority&quot;</span> <span class="nv">model</span><span class="nf">.</span><span class="nv">priority</span> <span class="kt">ChangePriority</span> <span class="p">]</span>
           <span class="kr">else</span>
            <span class="p">[</span> <span class="kt">ModuleHelpers</span><span class="nf">.</span><span class="nv">empty</span> <span class="p">]</span>
</pre></div>
</div>
<p>This is where all our HTML code is produced. Because HTML can be
complicated, a lot of work has been done recently to streamline this
process. The <code class="docutils literal"><span class="pre">ModuleHelpers</span></code> module contains lots of helper functions
for writing the HTML parts, as we will see.</p>
<p>We can see from the function definition the this function is provided
with the current data model, named <em>model</em>, and produces a list of
<code class="docutils literal"><span class="pre">Html</span> <span class="pre">Msg</span></code> (essentially meaning it produces both HTML and messages).</p>
<p>Most modules will be able to use the <code class="docutils literal"><span class="pre">ModuleHelpers.title</span></code> function to
begin the <code class="docutils literal"><span class="pre">viewModel</span></code> function. <code class="docutils literal"><span class="pre">title</span></code> takes three arguments; the
name of your web interface, the variable used to determine if the module
is <em>active</em> or not, and the message used to activate/deactivate your
module. If you kept the <code class="docutils literal"><span class="pre">active</span></code> variable in your model the same, we
have shown here, you can leave this line the same - just change the name
of the interface.</p>
<p>After the title, we use the <code class="docutils literal"><span class="pre">++</span></code> operation to <em>append</em> some more stuff
to the <code class="docutils literal"><span class="pre">List</span> <span class="pre">(Html</span> <span class="pre">Msg)</span></code> we are building. But we only want to append
this stuff if the module is active, so we use an <code class="docutils literal"><span class="pre">if</span></code> statement. In
Elm, <code class="docutils literal"><span class="pre">if</span></code> statements use an <code class="docutils literal"><span class="pre">if</span></code>/<code class="docutils literal"><span class="pre">then</span></code>/<code class="docutils literal"><span class="pre">else</span></code> syntax. In the
<code class="docutils literal"><span class="pre">else</span></code> part, we see that if the model is not active, we will just
append an empty list (technically it appends an empty text string). If
the model <em>is</em> active, however, we will display an integer field, where
the user can enter an integer value. This field will be labelled
“Priority” on the web interface, it will be associated with the
<code class="docutils literal"><span class="pre">model.priority</span></code> value, and <code class="docutils literal"><span class="pre">ChangePriority</span></code> is the message used to
change the value. By passing these three things to
<code class="docutils literal"><span class="pre">ModuleHelpers.integerField</span></code>, the function will be able to construct
the rest of the HTML needed to display the field in the web interface.
Here is what the same code would look like if we didn’t have the helper
function:</p>
<div class="highlight-elm"><div class="highlight"><pre><span></span><span class="kt">Html</span><span class="nf">.</span><span class="nv">p</span> <span class="p">[]</span>
    <span class="p">[</span> <span class="kt">Html</span><span class="nf">.</span><span class="nv">text</span> <span class="p">(</span><span class="s">&quot;Priority ++ &quot;</span><span class="nf">:</span> <span class="s">&quot;)</span>
<span class="s">    , Html.input</span>
<span class="s">        [ Html.Attributes.value (toString model.priority)</span>
<span class="s">        , Html.Attributes.type_ &quot;</span><span class="nv">number</span><span class="s">&quot;</span>
<span class="s">        , Html.Events.onInput ChangePriority</span>
<span class="s">        ]</span>
<span class="s">        []</span>
<span class="s">    ]</span>
</pre></div>
</div>
<p>So, technically, we aren’t saving that much, but there are a lot of
complicated HTML calls to make in there that can be hard to remember, so
having these helper functions is useful while you are new to making
modules. Just keep in mind that you can always construct interfaces
using the full set of HTML tags if you would like!</p>
<p>These helper functions are new (as of writing this), but we already have
helpers for checkboxes, integers, floats, and strings. By the time you
read this, there should be one written for dropdown menus, too. Check
the <code class="docutils literal"><span class="pre">ModuleHelpers.elm</span></code> in the <code class="docutils literal"><span class="pre">place/elm/plugins/</span></code> directory for
the latest offering.</p>
<p>The last piece of the puzzle is the <em>updateModel</em> function.</p>
<div class="highlight-elm"><div class="highlight"><pre><span></span><span class="nv">updateModel</span> <span class="nf">:</span> <span class="kt">Msg</span> <span class="nf">-&gt;</span> <span class="kt">Model</span> <span class="nf">-&gt;</span> <span class="p">(</span> <span class="kt">Model</span><span class="p">,</span> <span class="kt">Cmd</span> <span class="kt">Msg</span> <span class="p">)</span>
<span class="nv">updateModel</span> <span class="nv">msg</span> <span class="nv">model</span> <span class="nf">=</span>
    <span class="kr">case</span> <span class="nv">msg</span> <span class="kr">of</span>
        <span class="kt">ToggleActive</span> <span class="nf">-&gt;</span>
            <span class="kr">if</span> <span class="nv">model</span><span class="nf">.</span><span class="nv">active</span> <span class="kr">then</span>
                <span class="nv">updateModel</span> <span class="kt">SendJson</span>
                    <span class="p">{</span> <span class="nv">model</span>
                        <span class="nf">|</span> <span class="nv">className</span> <span class="nf">=</span> <span class="s">&quot;None&quot;</span>
                        <span class="p">,</span> <span class="nv">active</span> <span class="nf">=</span> <span class="kt">False</span>
                    <span class="p">}</span>
            <span class="kr">else</span>
                <span class="nv">updateModel</span> <span class="kt">SendJson</span>
                    <span class="p">{</span> <span class="nv">model</span>
                        <span class="nf">|</span> <span class="nv">className</span> <span class="nf">=</span> <span class="s">&quot;PLACETemplate&quot;</span>
                        <span class="p">,</span> <span class="nv">active</span> <span class="nf">=</span> <span class="kt">True</span>
                    <span class="p">}</span>

        <span class="kt">ChangePriority</span> <span class="nv">newPriority</span> <span class="nf">-&gt;</span>
            <span class="nv">updateModel</span> <span class="kt">SendJson</span>
                <span class="p">{</span> <span class="nv">model</span>
                    <span class="nf">|</span> <span class="nv">priority</span> <span class="nf">=</span> <span class="kt">Result</span><span class="nf">.</span><span class="nv">withDefault</span> <span class="mi">10</span> <span class="p">(</span><span class="kt">String</span><span class="nf">.</span><span class="nv">toInt</span> <span class="nv">newPriority</span><span class="p">)</span>
                <span class="p">}</span>

        <span class="kt">SendJson</span> <span class="nf">-&gt;</span>
            <span class="p">(</span> <span class="nv">model</span>
            <span class="p">,</span> <span class="nv">jsonData</span>
                <span class="p">(</span><span class="kt">Json</span><span class="nf">.</span><span class="kt">Encode</span><span class="nf">.</span><span class="nv">list</span>
                    <span class="p">[</span> <span class="kt">Json</span><span class="nf">.</span><span class="kt">Encode</span><span class="nf">.</span><span class="nv">object</span>
                        <span class="p">[</span> <span class="p">(</span> <span class="s">&quot;module_name&quot;</span><span class="p">,</span> <span class="kt">Json</span><span class="nf">.</span><span class="kt">Encode</span><span class="nf">.</span><span class="nv">string</span> <span class="nv">model</span><span class="nf">.</span><span class="nv">moduleName</span> <span class="p">)</span>
                        <span class="p">,</span> <span class="p">(</span> <span class="s">&quot;class_name&quot;</span><span class="p">,</span> <span class="kt">Json</span><span class="nf">.</span><span class="kt">Encode</span><span class="nf">.</span><span class="nv">string</span> <span class="nv">model</span><span class="nf">.</span><span class="nv">className</span> <span class="p">)</span>
                        <span class="p">,</span> <span class="p">(</span> <span class="s">&quot;priority&quot;</span><span class="p">,</span> <span class="kt">Json</span><span class="nf">.</span><span class="kt">Encode</span><span class="nf">.</span><span class="nv">int</span> <span class="nv">model</span><span class="nf">.</span><span class="nv">priority</span> <span class="p">)</span>
                        <span class="p">,</span> <span class="p">(</span> <span class="s">&quot;config&quot;</span>
                          <span class="p">,</span> <span class="kt">Json</span><span class="nf">.</span><span class="kt">Encode</span><span class="nf">.</span><span class="nv">object</span>
                                <span class="p">[]</span>
                          <span class="p">)</span>
                        <span class="p">]</span>
                    <span class="p">]</span>
                <span class="p">)</span>
            <span class="p">)</span>
</pre></div>
</div>
<p>In this function, we just have to write the code for each of our
messages. So we start with a <code class="docutils literal"><span class="pre">case</span></code> statement and then list each
message. Let’s take a moment and explain what’s happening in the three
messages provided by this template.</p>
<p><code class="docutils literal"><span class="pre">ToggleActive</span></code> is the first one. If <code class="docutils literal"><span class="pre">ToggleActive</span></code> corresponded to a
normal boolean value, we could simply have written:</p>
<div class="highlight-elm"><div class="highlight"><pre><span></span><span class="kt">ToggleSomething</span> <span class="nf">-&gt;</span> <span class="nv">updateModel</span> <span class="kt">SendJson</span> <span class="p">{</span> <span class="nv">model</span> <span class="nf">|</span> <span class="nv">something</span> <span class="nf">=</span> <span class="nv">not</span> <span class="nv">model</span><span class="nf">.</span><span class="nv">something</span> <span class="p">}</span>
</pre></div>
</div>
<p>This can be read as:</p>
<blockquote>
<div>“Update the model and send JSON data for the current model such that
something is now not something.”</div></blockquote>
<p>You can use this format for most boolean configuration values, but
<code class="docutils literal"><span class="pre">ToggleActive</span></code> is a bit different. When we set <code class="docutils literal"><span class="pre">model.active</span></code> to
<code class="docutils literal"><span class="pre">False</span></code> we also need to set <code class="docutils literal"><span class="pre">className</span></code> to <code class="docutils literal"><span class="pre">None</span></code>. PLACE enforces
this convention. So, when you are writing your own module, you can take
the <code class="docutils literal"><span class="pre">ToggleActive</span></code> code directly from this file, just change the
<code class="docutils literal"><span class="pre">className</span></code> to match the one in the Python module. If you have more
than one class in your module, you will need to take a more advanced
approach that is not covered here.</p>
<p>The <code class="docutils literal"><span class="pre">SendJson</span></code> message is a special one, because it handles syncing up
the data with PLACE. The entire data model is encoded into JSON and the
JSON is sent over a port to PLACE. We will talk about this more later.</p>
<p>So that’s it! From here, we will explore adapting this interface for
your own devices.</p>
</div>
<div class="section" id="starting-your-own-module">
<h2>Starting your own module<a class="headerlink" href="#starting-your-own-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="to-be-continued">
<h2>To be continued…<a class="headerlink" href="#to-be-continued" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
    <a id="sidebar-anchor"></a>
    

  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Elm Frontend Tutorial</a><ul>
<li><a class="reference internal" href="#brief-elm-introduction">Brief Elm introduction</a></li>
<li><a class="reference internal" href="#making-html-with-elm">Making HTML with Elm</a></li>
<li><a class="reference internal" href="#template-module">Template module</a></li>
<li><a class="reference internal" href="#starting-your-own-module">Starting your own module</a></li>
<li><a class="reference internal" href="#to-be-continued">To be continued…</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="config.html"
                        title="previous chapter">PLACE configuration</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="backend_tutorial.html"
                        title="next chapter">Python Backend Tutorial</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="backend_tutorial.html" title="Python Backend Tutorial"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="config.html" title="PLACE configuration"
             accesskey="P">previous</a> |</li>
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Paul Freeman, Jami L. Johnson, Henrik tom Wörden, and Kasper van Wijk.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
  </body>
</html>